<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="es">
<head>
  <meta charset="UTF-8">
  <title>Búsquedas de Clientes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link th:href="@{/css/busquedas.css}" rel="stylesheet">
  <link th:href="@{/css/estilos.css}" rel="stylesheet">
  <link th:href="@{/css/layout.css}" rel="stylesheet">
</head>
<body class="bg-light">

  <div th:replace="fragments/headher :: headher"></div>
  <div th:replace="fragments/navibar :: navibar"></div>

  <div class="container-fluid py-3">
    <div class="row g-3">
      <aside class="col-12 col-lg-3">
        <div class="card shadow-sm sticky-sidebar">
          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <span><b>Consultas</b></span>
            <button class="btn btn-light btn-sm d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#menuBusquedas">
              Menú
            </button>
          </div>

          <div id="menuBusquedas" class="card-body collapse d-lg-block">
            <div class="busq-section">
              <h6 class="text-muted mb-2">1) Por nombre exacto</h6>
              <form th:action="@{/busquedas/clientes/por-nombre}" method="get" class="d-grid gap-2">
                <input class="form-control" name="nombre" placeholder="Ej: María" required>
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">2) Nombre contiene</h6>
              <form th:action="@{/busquedas/clientes/nombre-contiene}" method="get" class="d-grid gap-2">
                <input class="form-control" name="q" placeholder="cadena/letra">
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">3) Email exacto</h6>
              <form th:action="@{/busquedas/clientes/email-exacto}" method="get" class="d-grid gap-2">
                <input class="form-control" name="email" placeholder="correo@dominio.com">
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">4) Emails @gmail.com</h6>
              <form th:action="@{/busquedas/clientes/email-gmail}" method="get" class="d-grid gap-2">
                <button class="btn btn-secondary btn-sm">Listar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">5) Crédito entre</h6>
              <form th:action="@{/busquedas/clientes/credito-entre}" method="get" class="d-grid gap-2">
                <div class="d-flex gap-2">
                  <input type="number" step="0.01" class="form-control" name="min" placeholder="mín">
                  <input type="number" step="0.01" class="form-control" name="max" placeholder="máx">
                </div>
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">6) Crédito mayor a</h6>
              <form th:action="@{/busquedas/clientes/credito-mayor}" method="get" class="d-grid gap-2">
                <input type="number" step="0.01" class="form-control" name="monto" placeholder="Monto">
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">7) Solo destacados</h6>
              <form th:action="@{/busquedas/clientes/destacados}" method="get" class="d-grid gap-2">
                <button class="btn btn-secondary btn-sm">Listar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">8) Nombre + crédito &gt;</h6>
              <form th:action="@{/busquedas/clientes/nombre-credito-mayor}" method="get" class="d-grid gap-2">
                <div class="d-flex gap-2">
                  <input class="form-control" name="nombre" placeholder="Nombre">
                  <input type="number" step="0.01" class="form-control" name="monto" placeholder="Monto">
                </div>
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">9) Foto = no_imagen.jpg</h6>
              <form th:action="@{/busquedas/clientes/foto-no-imagen}" method="get" class="d-grid gap-2">
                <button class="btn btn-secondary btn-sm">Listar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">10) Destacados con crédito &gt;</h6>
              <form th:action="@{/busquedas/clientes/destacados-credito-mayor}" method="get" class="d-grid gap-2">
                <input type="number" step="0.01" class="form-control" name="monto" placeholder="Monto">
                <button class="btn btn-primary btn-sm">Buscar</button>
              </form>
            </div>

            <div class="busq-section">
              <h6 class="text-muted mb-2">11) Top 5 por crédito</h6>
              <form th:action="@{/busquedas/clientes/top5-credito}" method="get" class="d-grid gap-2">
                <button class="btn btn-secondary btn-sm">Listar</button>
              </form>
            </div>

          </div>
        </div>
      </aside>
      <main class="col-12 col-lg-9">
        <div class="card shadow-sm h-100">
          <div class="card-header d-flex justify-content-between align-items-center bg-dark text-white">
            <h5 class="mb-0">Resultados</h5>
            <a th:href="@{/busquedas/clientes}" class="btn btn-light btn-sm">Limpiar</a>
          </div>

          <div class="card-body p-0">
            <div class="table-responsive table-results">
              <table class="table table-striped table-hover align-middle mb-0">
                <thead class="table-light sticky-thead">
                  <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Email</th>
                    <th class="text-end">Crédito</th>
                    <th>Teléfono</th>
                    <th>Destacado</th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="c : ${resultado}">
                    <td th:text="${c.id}">1</td>
                    <td th:text="${c.nombre}">Nombre</td>
                    <td th:text="${c.apellido}">Apellido</td>
                    <td th:text="${c.email}">correo@dominio.com</td>
                    <td class="text-end" th:text="${#numbers.formatDecimal(c.credito,1,'POINT',2,'POINT')}">0.00</td>
                    <td th:text="${c.telefono}">0000000000</td>
                    <td>
                      <span th:if="${c.destacado} == 1" class="badge bg-success">Sí</span>
                      <span th:if="${c.destacado} != 1" class="badge bg-secondary">No</span>
                    </td>
                  </tr>
                  <tr th:if="${#lists.isEmpty(resultado)}">
                    <td colspan="7" class="text-center text-muted py-4">Sin resultados</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </main>
    </div>
  </div>
  <div th:replace="fragments/fhooter :: fhooter"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
