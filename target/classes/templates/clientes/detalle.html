<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
      lang="es">
<head>
  <meta charset="UTF-8">
  <title>Detalle de Cliente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link th:href="@{/css/estilos.css}" rel="stylesheet">
  <link th:href="@{/css/layout.css}" rel="stylesheet">
</head>
<body class="bg-light py-4">

  <div th:replace="~{fragments/headher :: headher}"></div>
  <div th:replace="~{fragments/navibar :: navibar}"></div>

  <div class="container mt-4">
    <div class="card shadow-sm">
      <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Detalle del Cliente</h5>
        <div class="d-flex gap-2" sec:authorize="hasAnyRole('ADMIN', 'CAJERO')">
          <a th:href="@{/clientes}" class="btn btn-light btn-sm">Volver</a>
          <a th:href="@{/clientes/editar/{id}(id=${cliente.id})}" class="btn btn-warning btn-sm">Editar</a>
          <a th:href="@{/clientes/eliminar/{id}(id=${cliente.id})}" class="btn btn-danger btn-sm"
             onclick="return confirm('¿Eliminar este cliente?');">Eliminar</a>
        </div>
      </div>

      <div class="card-body">
        <div class="row g-4 align-items-center">
          
          <div class="col-md-4 text-center">
            
            <img th:if="${cliente.fotoCliente != null and !cliente.fotoCliente.isEmpty()}"
                 th:src="${cliente.fotoCliente}"
                 class="img-fluid rounded-circle shadow border"
                 style="width: 200px; height: 200px; object-fit: cover;"
                 alt="Foto cliente">

            <img th:unless="${cliente.fotoCliente != null and !cliente.fotoCliente.isEmpty()}"
                 th:src="@{/imagen/user_placeholder.png}"
                 class="img-fluid rounded-circle shadow border bg-white p-2"
                 style="width: 200px; height: 200px; object-fit: contain; opacity: 0.5;"
                 alt="Sin foto">
          </div>
          <div class="col-md-8">
            <h4 th:text="${(cliente.nombre ?: '') + ' ' + (cliente.apellido ?: '')}">Nombre Apellido</h4>
            <p><b>Email:</b> <span th:text="${cliente.email ?: '-'}">-</span></p>
            <p><b>Teléfono:</b> <span th:text="${cliente.telefono ?: '-'}">-</span></p>
            <p><b>Crédito:</b> <span th:text="${cliente.credito != null ? #numbers.formatDecimal(cliente.credito,1,'POINT',2,'POINT') : '0.00'}">0.00</span></p>
            <p>
              <b>Destacado:</b>
              <span th:if="${cliente.destacado} == 1" class="badge bg-success">Sí</span>
              <span th:if="${cliente.destacado} != 1" class="badge bg-secondary">No</span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div th:replace="~{fragments/fhooter :: fhooter}"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


